<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Actividades Lúdicas</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, #003b29, #000000);
      color: #fff;
      padding: 20px;
      margin: 0;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }

    .header h2 {
      color: #00e676;
      margin: 0;
      font-size: 1.8rem;
    }

    .header img {
      height: 60px;
      border-radius: 10px;
    }

    h3 {
      color: #ffc107;
      margin-top: 30px;
      font-size: 1.3rem;
      border-left: 4px solid #ffc107;
      padding-left: 10px;
    }

    .actividad, .anuncio {
      background: rgba(1, 59, 43, 0.9);
      padding: 16px;
      margin-top: 12px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      animation: fadeIn 0.4s ease-in-out;
      transition: transform 0.2s ease;
    }

    .actividad:hover, .anuncio:hover {
      transform: scale(1.02);
    }

    .actividad a {
      display: inline-block;
      margin-top: 10px;
      background: #00e676;
      color: #000;
      padding: 8px 14px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: bold;
      transition: background 0.3s ease;
    }

    .actividad a:hover {
      background: #00c762;
    }

    .anuncio {
      border-left: 5px solid #ffc107;
    }

    .admin-btn {
      margin-top: 40px;
      text-align: center;
    }

    .admin-btn a {
      background-color: #015c45;
      padding: 12px 18px;
      border-radius: 8px;
      text-decoration: none;
      color: #fff;
      font-weight: bold;
      display: inline-block;
      transition: background 0.3s ease;
    }

    .admin-btn a:hover {
      background-color: #01a678;
    }

    .admin-access {
      display: block;
      margin: 30px auto;
      padding: 12px 20px;
      background-color: #00e676;
      color: #000;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .admin-access:hover {
      background-color: #00c160;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 600px) {
      .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }

      .header img {
        align-self: flex-end;
        height: 50px;
      }

      h2 {
        font-size: 1.5rem;
      }

      h3 {
        font-size: 1.1rem;
      }

      .actividad, .anuncio {
        padding: 12px;
      }

      .admin-access {
        width: 100%;
      }
    }
  </style>
</head>
<body>

  <div class="header">
    <h2>🎯 Actividades Lúdicas</h2>
    <img src="unnamed.png" alt="Logo">
  </div>

  <h3>📂 Actividades cargadas:</h3>
  <div id="actividadesContainer"></div>

  <h3>📢 Anuncios:</h3>
  <div id="anunciosContainer"></div>

  <button class="admin-access" onclick="window.location.href='login_admin.html?next=admin_actividades.html'">
    👩‍🏫 Ir al panel del Administrador
  </button>

  <div class="admin-btn">
    <a href="menu_principal.html">🔙 Volver al Menú Principal</a>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import {
      getFirestore,
      collection,
      getDocs,
      orderBy,
      query
    } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDVn8rox_TbXhGFRKP_mW_zjaIHS2mE84E",
      authDomain: "acompanamiento-87e74.firebaseapp.com",
      projectId: "acompanamiento-87e74",
      storageBucket: "acompanamiento-87e74.appspot.com",
      messagingSenderId: "305795840612",
      appId: "1:305795840612:web:20c87f474b0cad842ebd71",
      measurementId: "G-RBKVS897GV"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function cargarActividades() {
      const contenedor = document.getElementById("actividadesContainer");
      contenedor.innerHTML = "";
      const q = query(collection(db, "actividades"), orderBy("fecha", "desc"));
      const snap = await getDocs(q);

      snap.forEach(doc => {
        const data = doc.data();
        const div = document.createElement("div");
        div.className = "actividad";
        div.innerHTML = `
          <strong>📌 ${data.nombre}</strong><br/>
          Objetivo: ${data.objetivo}<br/>
          <a href="${data.archivoBase64}" download="${data.nombre}.pdf" target="_blank">📄 Descargar PDF</a>
        `;
        contenedor.appendChild(div);
      });
    }

    async function cargarAnuncios() {
      const contenedor = document.getElementById("anunciosContainer");
      contenedor.innerHTML = "";
      const q = query(collection(db, "anuncios"), orderBy("fecha", "desc"));
      const snap = await getDocs(q);

      snap.forEach(doc => {
        const data = doc.data();
        const div = document.createElement("div");
        div.className = "anuncio";
        div.textContent = `📢 ${data.mensaje}`;
        contenedor.appendChild(div);
      });
    }

    cargarActividades();
    cargarAnuncios();
  </script>
</body>
</html>
